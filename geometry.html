index.html
<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<title>Geometry Dash – Browser Edition</title>
<style>
body {
  margin: 0;
  background: linear-gradient(to bottom, #87CEFA, #FFFFFF); /* Lys blå himmel */
  display: flex;
  justify-content: center;
  align-items: center;
  height: 100vh;
  font-family: Arial, sans-serif;
  user-select: none;
}
canvas {
  background: linear-gradient(to bottom, #A0E7E5, #B4F8C8); /* Lys grønn bakgrunn */
  border: 3px solid #FF69B4; 
  box-shadow: 0 0 20px #FF69B4;
}
button {
  padding: 10px 20px;
  font-size: 18px;
  margin: 10px;
  cursor: pointer;
  border: none;
  border-radius: 5px;
  transition: 0.2s;
}
button:hover {
  background-color: #FFD700;
}
#ui-container {
  position: absolute;
  top: 0;
  left: 50%;
  transform: translateX(-50%);
  text-align: center;
}
.progress-bar {
  width: 900px;
  height: 10px;
  background: #ddd;
  border: 2px solid #333;
  margin-bottom: 5px;
  border-radius: 5px;
}
.progress-fill {
  height: 100%;
  background: #FF69B4;
  width: 0%;
  border-radius: 5px;
}
</style>
</head>
<body>

<canvas id="game" width="900" height="350"></canvas>
<div id="ui-container"></div>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");
const ui = document.getElementById("ui-container");

let state = "menu"; // menu, levels, play, pause, gameover
let currentLevel = 0;
const speed = 4;
const totalDistance = 1200; // enkel simulering av lengde

const levels = [
  { name: "Level 1 – Stereo Start", spikes: [400, 550, 700] },
  { name: "Level 2 – Air Trouble", spikes: [350, 500, 650, 800] },
  { name: "Level 3 – Wave Madness", spikes: [300, 450, 600, 750] }
];

let player = {
  x: 120,
  y: 260,
  size: 30,
  dy: 0,
  gravity: 0.9,
  angle: 0,
  alive: true,
  distance: 0 // progresjon
};

// UI Buttons
let buttons = [];

function createButton(text, onClick) {
  const btn = document.createElement("button");
  btn.innerText = text;
  btn.onclick = onClick;
  ui.appendChild(btn);
  buttons.push(btn);
  return btn;
}

function clearButtons() {
  buttons.forEach(b => ui.removeChild(b));
  buttons = [];
}

// Key handling
document.addEventListener("keydown", (e) => {
  if (state === "menu") state = "levels";
  else if (state === "levels") {
    currentLevel = 0;
    startLevel();
  } else if (state === "play") {
    if (e.code === "Escape") togglePause();
    else if (player.y >= 260) player.dy = -15; // hopp
  } else if (state === "pause") {
    if (e.code === "Escape") resumeGame();
  }
});

// Start eller reset nivå
function startLevel() {
  state = "play";
  player.y = 260;
  player.dy = 0;
  player.angle = 0;
  player.alive = true;
  player.distance = 0;
  levels[currentLevel].spikes = [...levels[currentLevel].spikes];
  clearButtons();
  createProgressBar();
}

// Pause
function togglePause() {
  if (state !== "play") return;
  state = "pause";
  clearButtons();
  createPauseMenu();
}

function resumeGame() {
  state = "play";
  clearButtons();
  createProgressBar();
}

// Game Over
function gameOver() {
  state = "gameover";
  clearButtons();
  createGameOverMenu();
}

// Progress bar
let progressFill;
function createProgressBar() {
  const container = document.createElement("div");
  container.className = "progress-bar";
  progressFill = document.createElement("div");
  progressFill.className = "progress-fill";
  progressFill.style.width = (player.distance / totalDistance * 100) + "%";
  container.appendChild(progressFill);
  ui.appendChild(container);
}

// Menyer
function createGameOverMenu() {
  createButton("Restart", () => startLevel());
  createButton("Main Menu", () => {
    state = "menu";
    clearButtons();
  });
}

function createPauseMenu() {
  createButton("Resume", resumeGame);
  createButton("Restart", startLevel);
  createButton("Main Menu", () => {
    state = "menu";
    clearButtons();
  });
}

// Tegning
function drawMenu() {
  ctx.fillStyle = "#FF1493";
  ctx.font = "48px Arial";
  ctx.fillText("GEOMETRY DASH", 180, 150);
  ctx.font = "20px Arial";
  ctx.fillText("Press any key to start", 300, 200);
}

function drawLevels() {
  ctx.fillStyle = "#00008B";
  ctx.font = "32px Arial";
  ctx.fillText("Select Level", 330, 80);
  levels.forEach((l, i) => {
    ctx.fillText(`${i+1}. ${l.name}`, 250, 140 + i * 50);
  });
  ctx.font = "16px Arial";
  ctx.fillText("Press any key to start", 330, 300);
}

function drawPlayer() {
  ctx.save();
  ctx.translate(player.x + 15, player.y + 15);
  ctx.rotate(player.angle);
  ctx.fillStyle = "#FFD700";
  ctx.fillRect(-15, -15, 30, 30);
  ctx.restore();
}

function drawSpikes(level) {
  ctx.fillStyle = "#FF4500";
  level.spikes.forEach(x => {
    ctx.beginPath();
    ctx.moveTo(x, 300);
    ctx.lineTo(x + 20, 260);
    ctx.lineTo(x + 40, 300);
    ctx.fill();

    if (player.x + player.size > x &&
        player.x < x + 40 &&
        player.y + player.size > 260) {
      player.alive = false;
      gameOver();
    }
  });
}

// Main loop
function update() {
  ctx.clearRect(0,0,canvas.width,canvas.height);

  if (state === "menu") drawMenu();
  else if (state === "levels") drawLevels();
  else if (state === "play") {
    // Oppdater spilleren
    player.dy += player.gravity;
    player.y += player.dy;

    if (player.y >= 260) {
      player.y = 260;
      player.dy = 0;
    } else player.angle += 0.15;

    // Rull spikes
    levels[currentLevel].spikes = levels[currentLevel].spikes.map(x => x - speed);

    // Oppdater distance
    player.distance += speed;
    if (progressFill) progressFill.style.width = (player.distance / totalDistance * 100) + "%";

    drawPlayer();
    drawSpikes(levels[currentLevel]);

    // Tegn bakken
    ctx.fillStyle = "#32CD32";
    ctx.fillRect(0, 300, canvas.width, 4);
  }

  requestAnimationFrame(update);
}

update();
</script>

</body>
</html>
