index.htmlx
<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<title>Adrian's geodash - Pro Edition</title>
<style>
  body { margin: 0; background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
  canvas { border: 4px solid #444; box-shadow: 0 0 80px rgba(0,255,255,0.2); background: #010103; }
  #ui { position: absolute; text-align: center; pointer-events: none; width: 900px; height: 350px; color: white; }
  .menu { pointer-events: auto; background: rgba(0,0,0,0.9); padding: 30px; border: 3px solid cyan; border-radius: 15px; display: inline-block; margin-top: 20px; }
  button { padding: 12px 30px; font-size: 18px; cursor: pointer; border: none; background: cyan; color: black; font-weight: bold; margin: 8px; border-radius: 5px; transition: 0.2s; }
  button:hover { background: magenta; transform: scale(1.1); color: white; }
  .hud { position: absolute; top: 15px; width: 100%; display: flex; flex-direction: column; align-items: center; }
  .bar { width: 80%; height: 10px; background: rgba(255,255,255,0.1); border-radius: 10px; border: 1px solid #555; overflow: hidden; }
  #fill { width: 0%; height: 100%; background: linear-gradient(90deg, #00ffff, #ff00ff); box-shadow: 0 0 10px cyan; }
</style>
</head>
<body>

<div id="ui">
  <div id="hud" class="hud" style="display:none;">
    <div class="bar"><div id="fill"></div></div>
    <div id="stats" style="margin-top:5px; font-size:14px; letter-spacing:3px;">ADRIAN'S GEODASH - DEATHS: 0</div>
  </div>
  
  <div id="main-menu" class="menu">
    <h1 style="font-size: 45px; margin: 10px; text-shadow: 0 0 15px cyan;">ADRIAN'S GEODASH</h1>
    <p>SELECT LEVEL</p>
    <div id="level-selection"></div>
  </div>

  <div id="death-menu" class="menu" style="display:none;">
    <h1 style="color:red; margin:10px;">WASTED</h1>
    <button onclick="startLevel(curLvl)">RETRY (R)</button>
    <button onclick="location.reload()">MENU</button>
  </div>
</div>

<canvas id="game" width="900" height="350"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let state = "menu", curLvl = 0, deaths = 0, particles = [], trail = [], shake = 0;
let p = { x: 100, y: 270, dy: 0, gravity: 0.9, angle: 0, mode: 'cube', gDir: 1, alive: true, hold: false };

// TYPER: s=spike, b=block, o=orb, pS=shipPortal(grønn), pC=cubePortal(lilla), pG=gravPortal(blå), pN=normalPortal(gul), g=goal
const levelData = [
  { name: "THE BEGINNING", color: "#0055ff", len: 4000, obs: [{x:700,t:'s'},{x:1100,t:'b'},{x:1500,t:'pS',y:150},{x:2000,t:'s',y:50},{x:2400,t:'s',y:280},{x:3000,t:'pC',y:150},{x:3800,t:'g'}] },
  { name: "UPSIDE DOWN", color: "#aa00ff", len: 5000, obs: [{x:600,t:'s'},{x:1000,t:'pG',y:150},{x:1500,t:'s',y:60},{x:2000,t:'o',y:80},{x:2500,t:'pN',y:150},{x:3000,t:'s'},{x:4800,t:'g'}] },
  { name: "ADRIAN'S DEMON", color: "#ff0044", len: 6500, obs: [{x:500,t:'s'},{x:800,t:'pS',y:150},{x:1300,t:'pG',y:150},{x:1800,t:'s',y:50},{x:2200,t:'o',y:100},{x:2600,t:'pN',y:150},{x:3000,t:'pC',y:150},{x:3500,t:'s'},{x:4000,t:'s'},{x:6300,t:'g'}] }
];

function initMenu() {
  const div = document.getElementById("level-selection");
  levelData.forEach((l, i) => {
    let btn = document.createElement("button");
    btn.innerText = l.name;
    btn.onclick = () => startLevel(i);
    div.appendChild(btn);
  });
}

function startLevel(i) {
  curLvl = i; state = "play"; shake = 0;
  p = { x: 100, y: 270, dy: 0, gravity: 0.9, angle: 0, mode: 'cube', gDir: 1, alive: true, hold: false };
  trail = []; particles = [];
  document.getElementById("main-menu").style.display = "none";
  document.getElementById("death-menu").style.display = "none";
  document.getElementById("hud").style.display = "flex";
}

function drawPlayer() {
  ctx.save();
  ctx.translate(p.x + 15, p.y + 15);
  ctx.rotate(p.angle * Math.PI / 180);
  ctx.shadowBlur = 15;
  ctx.shadowColor = p.mode === 'cube' ? "cyan" : "magenta";
  
  if(p.mode === 'cube') {
    // Kube-avatar
    ctx.fillStyle = "cyan";
    ctx.fillRect(-15, -15, 30, 30);
    ctx.strokeStyle = "white"; ctx.lineWidth = 2;
    ctx.strokeRect(-15, -15, 30, 30);
    // Øyne
    ctx.fillStyle = "black";
    ctx.fillRect(5, -10, 5, 5); ctx.fillRect(5, 5, 5, 5);
  } else {
    // Skip-avatar
    ctx.fillStyle = "magenta";
    ctx.beginPath();
    ctx.moveTo(-15, 0); ctx.lineTo(15, -10); ctx.lineTo(15, 10); ctx.closePath(); ctx.fill();
    ctx.fillStyle = "cyan"; ctx.fillRect(0, -5, 10, 10); // "Cockpit"
  }
  ctx.restore();
}

function drawPortal(x, y, color) {
  ctx.save();
  ctx.shadowBlur = 20; ctx.shadowColor = color;
  ctx.strokeStyle = color; ctx.lineWidth = 5;
  ctx.beginPath();
  ctx.ellipse(x+10, y+50, 20, 80, 0, 0, Math.PI*2);
  ctx.stroke();
  // Partikler inni portalen
  ctx.globalAlpha = 0.3;
  ctx.fillStyle = color;
  ctx.fill();
  ctx.restore();
}

function update() {
  ctx.clearRect(0,0,900,350);
  if(state === "play") {
    if(p.alive) {
      if(p.mode === 'cube') {
        if(p.hold && (p.y >= 270 || p.y <= 30)) { p.dy = -13 * p.gDir; p.hold = false; }
        p.dy += p.gravity * p.gDir;
        p.angle += 7 * p.gDir;
      } else {
        p.dy += (p.hold ? -0.6 : 0.6) * p.gDir;
        p.angle = p.dy * 3;
      }
      p.y += p.dy; p.x += 8.5;

      if(p.y > 270) { p.y = 270; p.dy = 0; if(p.mode==='cube') p.angle = Math.round(p.angle/90)*90; }
      if(p.y < 30) { p.y = 30; p.dy = 0; if(p.mode==='cube') p.angle = Math.round(p.angle/90)*90; }

      trail.push({x:p.x, y:p.y}); if(trail.length > 20) trail.shift();
    }

    ctx.save();
    if(shake > 0) { ctx.translate(Math.random()*shake, Math.random()*shake); shake *= 0.9; }
    ctx.translate(-p.x + 150, 0);

    // Bakgrunn
    ctx.globalAlpha = 0.1; ctx.fillStyle = levelData[curLvl].color; ctx.fillRect(p.x-200, 0, 1000, 350); ctx.globalAlpha = 1;

    // Trail
    ctx.strokeStyle = "cyan"; ctx.lineWidth = 2; ctx.beginPath();
    trail.forEach(t => ctx.lineTo(t.x+15, t.y+15)); ctx.stroke();

    // Objekter
    levelData[curLvl].obs.forEach(o => {
      if(o.t==='s') {
        ctx.fillStyle="#ff4444"; ctx.beginPath(); ctx.moveTo(o.x,300); ctx.lineTo(o.x+20,260); ctx.lineTo(o.x+40,300); ctx.fill();
        if(p.alive && Math.abs(p.x-o.x)<30 && Math.abs(p.y-(o.y||270))<30) { p.alive=false; deaths++; shake=10; setTimeout(()=>document.getElementById("death-menu").style.display="block",600); }
      }
      else if(o.t==='b') { ctx.fillStyle="#fff"; ctx.fillRect(o.x, 260, 40, 40); if(p.alive && Math.abs(p.x-o.x)<35 && p.y>250) { p.alive=false; deaths++; shake=10; setTimeout(()=>document.getElementById("death-menu").style.display="block",600); } }
      else if(o.t==='o') { ctx.strokeStyle="yellow"; ctx.lineWidth=3; ctx.beginPath(); ctx.arc(o.x,o.y,20,0,7); ctx.stroke(); if(p.alive && p.hold && Math.hypot(p.x-o.x,p.y-o.y)<50){p.dy=-12*p.gDir; p.hold=false;}}
      
      // Portaler
      else if(o.t==='pS') { drawPortal(o.x, o.y-50, "#00ff00"); if(p.x > o.x) p.mode='ship'; }
      else if(o.t==='pC') { drawPortal(o.x, o.y-50, "#ff00ff"); if(p.x > o.x) p.mode='cube'; }
      else if(o.t==='pG') { drawPortal(o.x, o.y-50, "#0088ff"); if(p.x > o.x-5 && p.x < o.x+5) p.gDir = -1; }
      else if(o.t==='pN') { drawPortal(o.x, o.y-50, "#ffff00"); if(p.x > o.x-5 && p.x < o.x+5) p.gDir = 1; }
      else if(o.t==='g') { ctx.fillStyle="cyan"; ctx.fillRect(o.x,0,10,350); if(p.x > o.x) location.reload(); }
    });

    drawPlayer();
    ctx.restore();

    document.getElementById("fill").style.width = (p.x/levelData[curLvl].len*100)+"%";
    document.getElementById("stats").innerText = `ADRIAN'S GEODASH - DEATHS: ${deaths}`;
  }
  requestAnimationFrame(update);
}

window.onkeydown = e => { if(e.code==="Space" || e.key==="ArrowUp") p.hold = true; if(e.code==="KeyR") startLevel(curLvl); };
window.onkeyup = e => { if(e.code==="Space" || e.key==="ArrowUp") p.hold = false; };

initMenu(); update();
</script>
</body>
</html>
