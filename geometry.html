index.htmlx
<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<title>Adrian's Geodash - Hardcore Edition</title>
<style>
  body { margin: 0; background: #000; display: flex; justify-content: center; align-items: center; height: 100vh; font-family: 'Segoe UI', sans-serif; overflow: hidden; }
  canvas { border: 4px solid #222; box-shadow: 0 0 100px rgba(0,255,255,0.2); background: #000; }
  #ui { position: absolute; text-align: center; pointer-events: none; width: 900px; height: 350px; color: white; }
  .menu { pointer-events: auto; background: rgba(0,0,0,0.9); padding: 30px; border: 2px solid cyan; border-radius: 10px; display: inline-block; }
  .grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 10px; margin-top: 20px; }
  button { padding: 12px; font-size: 14px; cursor: pointer; border: none; background: cyan; color: black; font-weight: bold; border-radius: 4px; transition: 0.2s; }
  button:hover { background: #ff00ff; color: white; transform: scale(1.1); }
  .hud { position: absolute; top: 15px; width: 100%; display: flex; flex-direction: column; align-items: center; }
  .bar { width: 80%; height: 10px; background: rgba(255,255,255,0.05); border-radius: 10px; border: 1px solid #444; overflow: hidden; }
  #fill { width: 0%; height: 100%; background: linear-gradient(90deg, #00ffff, #ff00ff); box-shadow: 0 0 15px cyan; }
</style>
</head>
<body>

<div id="ui">
  <div id="hud" class="hud" style="display:none;">
    <div class="bar"><div id="fill"></div></div>
    <div id="stats" style="margin-top:5px; font-size:14px; letter-spacing:4px; text-shadow: 2px 2px #000;">ADRIAN'S GEODASH - DEATHS: 0</div>
  </div>
  
  <div id="main-menu" class="menu">
    <h1 style="font-size: 45px; margin: 0; text-shadow: 0 0 20px cyan; letter-spacing: 5px;">ADRIAN'S GEODASH</h1>
    <div class="grid" id="lvl-select"></div>
  </div>

  <div id="death-menu" class="menu" style="display:none;">
    <h1 style="color:#ff0044; margin:10px;">CRASHED</h1>
    <button onclick="startLevel(curLvl)">RETRY (R)</button>
    <button onclick="location.reload()">MENU</button>
  </div>
</div>

<canvas id="game" width="900" height="350"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let state = "menu", curLvl = 0, deaths = 0, particles = [], trail = [], fireworks = [], stars = [];
let p = { x: 100, y: 270, dy: 0, gravity: 0.9, angle: 0, mode: 'cube', gDir: 1, alive: true, hold: false };

for(let i=0; i<80; i++) stars.push({x: Math.random()*900, y: Math.random()*350, s: Math.random()*2, o: Math.random()});

const levelData = [
  { name: "1. GENESIS", color: "#0066ff", len: 4500, obs: [{x:600,t:'s'},{x:800,t:'s'},{x:1200,t:'b'},{x:1600,t:'pS',y:150},{x:2200,t:'m',y:0},{x:3800,t:'g'}] },
  { name: "2. ORBIT", color: "#8800ff", len: 5500, obs: [{x:500,t:'s'},{x:900,t:'pG',y:150},{x:1400,t:'m',y:0},{x:2000,t:'pN',y:150},{x:2500,t:'pS',y:150},{x:5300,t:'g'}] },
  { name: "3. NEON", color: "#ff0066", len: 6500, obs: [{x:600,t:'s'},{x:1000,t:'pS',y:150},{x:1500,t:'m',y:0},{x:2500,t:'pN',y:150},{x:3500,t:'o',y:100},{x:6300,t:'g'}] },
  { name: "4. ETHER", color: "#00ffcc", len: 7500, obs: [{x:800,t:'s'},{x:1200,t:'m',y:0},{x:1500,t:'pS',y:150},{x:3000,t:'o',y:150},{x:7300,t:'g'}] },
  { name: "5. VOID", color: "#222", len: 8500, obs: [{x:500,t:'s'},{x:1200,t:'m',y:0},{x:2200,t:'m',y:0},{x:3500,t:'pS',y:150},{x:8300,t:'g'}] },
  { name: "6. TITAN", color: "#ff8800", len: 9500, obs: [{x:400,t:'s'},{x:1500,t:'m',y:0},{x:3000,t:'m',y:0},{x:4500,t:'o',y:120},{x:9300,t:'g'}] },
  { name: "7. APEX", color: "#ffffff", len: 11000, obs: [{x:600,t:'s'},{x:2000,t:'m',y:0},{x:4000,t:'m',y:0},{x:6000,t:'m',y:0},{x:10800,t:'g'}] },
  { name: "8. ADRIAN", color: "#ff0000", len: 14000, obs: [{x:400,t:'s'},{x:450,t:'s'},{x:1000,t:'m',y:0},{x:2000,t:'m',y:0},{x:3000,t:'m',y:0},{x:4000,t:'pS',y:150},{x:13800,t:'g'}] }
];

function initMenu() {
  const div = document.getElementById("lvl-select");
  levelData.forEach((l, i) => {
    let btn = document.createElement("button");
    btn.innerText = l.name;
    btn.onclick = () => startLevel(i);
    div.appendChild(btn);
  });
}

function startLevel(i) {
  curLvl = i; state = "play"; fireworks = [];
  p = { x: 100, y: 270, dy: 0, gravity: 0.9, angle: 0, mode: 'cube', gDir: 1, alive: true, hold: false };
  trail = []; particles = [];
  levelData[i].obs.forEach(o => { if(o.t==='m') o.curY = -50; }); // Reset moving objects
  document.getElementById("main-menu").style.display = "none";
  document.getElementById("death-menu").style.display = "none";
  document.getElementById("hud").style.display = "flex";
}

function drawPlayer() {
  ctx.save();
  ctx.translate(p.x + 15, p.y + 15);
  ctx.rotate(p.angle * Math.PI / 180);
  ctx.shadowBlur = 20; ctx.shadowColor = p.mode === 'cube' ? "cyan" : "magenta";
  ctx.fillStyle = p.mode === 'cube' ? "cyan" : "magenta";
  ctx.fillRect(-15, -15, 30, 30);
  ctx.strokeStyle = "white"; ctx.lineWidth = 2; ctx.strokeRect(-15, -15, 30, 30);
  ctx.fillStyle = "white"; ctx.fillRect(4, -8, 6, 6); ctx.fillRect(4, 2, 6, 6);
  ctx.restore();
}

function update() {
  ctx.clearRect(0,0,900,350);
  
  // Bakgrunn Nebula & Stars
  let time = Date.now() * 0.001;
  let bgGrd = ctx.createRadialGradient(450, 175, 50, 450, 175, 600);
  bgGrd.addColorStop(0, levelData[curLvl].color + "33");
  bgGrd.addColorStop(1, "#000");
  ctx.fillStyle = bgGrd; ctx.fillRect(0,0,900,350);

  stars.forEach(s => {
    s.x -= (state === "play" ? 1.5 : 0.3);
    if(s.x < 0) s.x = 900;
    ctx.globalAlpha = Math.abs(Math.sin(time + s.o));
    ctx.fillStyle = "white"; ctx.fillRect(s.x, s.y, s.s, s.s);
  });
  ctx.globalAlpha = 1;

  if(state === "play") {
    if(p.alive) {
      if(p.mode === 'cube') {
        if(p.hold && (p.y >= 270 || p.y <= 30)) { p.dy = -13 * p.gDir; p.hold = false; }
        p.dy += p.gravity * p.gDir; p.angle += 7 * p.gDir;
      } else {
        p.dy += (p.hold ? -0.8 : 0.8) * p.gDir; p.angle = p.dy * 4;
      }
      p.y += p.dy; p.x += 10;

      if(p.y > 270) { p.y = 270; p.dy = 0; if(p.mode==='cube') p.angle = Math.round(p.angle/90)*90; }
      if(p.y < 30) { p.y = 30; p.dy = 0; if(p.mode==='cube') p.angle = Math.round(p.angle/90)*90; }
      trail.push({x:p.x, y:p.y}); if(trail.length > 15) trail.shift();
    }

    ctx.save();
    ctx.translate(-p.x + 150, 0);

    levelData[curLvl].obs.forEach(o => {
      // Moving Objects logikk
      if(o.t === 'm') {
        if(p.x > o.x - 400) o.curY = Math.min(260, (o.curY || -50) + 15);
        ctx.fillStyle = "#ff00ff"; ctx.shadowBlur = 15; ctx.shadowColor = "magenta";
        ctx.fillRect(o.x, o.curY, 40, 40);
        if(p.alive && Math.abs(p.x-o.x)<30 && Math.abs(p.y-o.curY)<30) { p.alive=false; deaths++; setTimeout(()=>document.getElementById("death-menu").style.display="block",500); }
      }
      else if(o.t==='s') {
        ctx.fillStyle="#ff3344"; ctx.shadowBlur = 10; ctx.shadowColor = "red";
        ctx.beginPath(); ctx.moveTo(o.x,300); ctx.lineTo(o.x+20,260); ctx.lineTo(o.x+40,300); ctx.fill();
        ctx.beginPath(); ctx.moveTo(o.x+10,0); ctx.lineTo(o.x+30,40); ctx.lineTo(o.x+50,0); ctx.fill();
        if(p.alive && Math.abs(p.x-o.x)<28 && (Math.abs(p.y-270)<30 || Math.abs(p.y-30)<30)) { p.alive=false; deaths++; setTimeout(()=>document.getElementById("death-menu").style.display="block",500); }
      }
      else if(o.t==='o') {
        ctx.strokeStyle="yellow"; ctx.lineWidth=4; ctx.beginPath(); ctx.arc(o.x,o.y,25,0,7); ctx.stroke();
        if(p.alive && p.hold && Math.hypot(p.x-o.x,p.y-o.y)<60){p.dy=-13*p.gDir; p.hold=false;}
      }
      else if(o.t==='pS') {
        ctx.strokeStyle="#0f0"; ctx.lineWidth=4; ctx.beginPath(); ctx.ellipse(o.x, 150, 30, 100, 0, 0, 7); ctx.stroke();
        if(p.x > o.x) p.mode='ship';
      }
      else if(o.t==='g') {
        ctx.fillStyle="white"; ctx.fillRect(o.x, 0, 15, 350);
        if(p.x > o.x && fireworks.length === 0) {
          for(let i=0; i<80; i++) fireworks.push({x:p.x, y:175, dx:(Math.random()-0.5)*15, dy:(Math.random()-0.5)*15, l:1, c:`hsl(${Math.random()*360},100%,50%)`});
          setTimeout(()=>location.reload(), 2500);
        }
      }
      ctx.shadowBlur = 0;
    });

    drawPlayer();

    fireworks.forEach((f, i) => {
      f.x+=f.dx; f.y+=f.dy; f.dy+=0.1; f.l-=0.01;
      ctx.fillStyle = f.c; ctx.globalAlpha = f.l; ctx.fillRect(f.x, f.y, 4, 4);
      if(f.l<=0) fireworks.splice(i, 1);
    });
    ctx.globalAlpha = 1; ctx.restore();

    document.getElementById("fill").style.width = (p.x/levelData[curLvl].len*100)+"%";
    document.getElementById("stats").innerText = `ADRIAN'S GEODASH - DEATHS: ${deaths}`;
  }
  requestAnimationFrame(update);
}

window.onkeydown = e => { if(e.code==="Space" || e.key==="ArrowUp") p.hold = true; if(e.code==="KeyR") startLevel(curLvl); };
window.onkeyup = e => { if(e.code==="Space" || e.key==="ArrowUp") p.hold = false; };
initMenu(); update();
</script>
</body>
</html>
